/**
 * 
 * 全局JavaScript
 * 
 * */
var mycms = {
	layouthref:function(id,href){
		$("#"+id).panel('refresh',href);
		if(id == "home")
			$("#home_tabs").tabs('select',0);
	},
	acc_select:function(id,title){
		$("#"+id).accordion('select',title);
	},
	reqGridData:function(id,arg){
		$("#"+id).datagrid('load',{'filePath':arg});
	}
};

var module = {
	selectrow:null,			//选中行对象
	tempid:null,			//选中的模板名称
	moduleName:null, 		//模块名称
	filePath:null			//文件路径
};
/*!artTemplate - Template Engine*/
var template=function(e,t){return template[typeof t=="object"?"render":"compile"].apply(template,arguments)};(function(e,t){"use strict";e.version="2.0.0",e.openTag="<%",e.closeTag="%>",e.isEscape=!0,e.isCompress=!1,e.parser=null,e.render=function(e,t){var n=r(e);return n===undefined?i({id:e,name:"Render Error",message:"No Template"}):n(t)},e.compile=function(t,r){function c(n){try{return new f(n)+""}catch(s){return u?(s.id=t||r,s.name="Render Error",s.source=r,i(s)):e.compile(t,r,!0)(n)}}var o=arguments,u=o[2],a="anonymous";typeof r!="string"&&(u=o[1],r=o[0],t=a);try{var f=s(r,u)}catch(l){return l.id=t||r,l.name="Syntax Error",i(l)}return c.prototype=f.prototype,c.toString=function(){return f.toString()},t!==a&&(n[t]=c),c},e.helper=function(t,n){e.prototype[t]=n},e.onerror=function(e){var n="[template]:\n"+e.id+"\n\n[name]:\n"+e.name;e.message&&(n+="\n\n[message]:\n"+e.message),e.line&&(n+="\n\n[line]:\n"+e.line,n+="\n\n[source]:\n"+e.source.split(/\n/)[e.line-1].replace(/^[\s\t]+/,"")),e.temp&&(n+="\n\n[temp]:\n"+e.temp),t.console&&console.error(n)};var n={},r=function(r){var i=n[r];if(i===undefined&&"document"in t){var s=document.getElementById(r);if(s){var o=s.value||s.innerHTML;return e.compile(r,o.replace(/^\s*|\s*$/g,""))}}else if(n.hasOwnProperty(r))return i},i=function(t){function n(){return n+""}return e.onerror(t),n.toString=function(){return"{Template Error}"},n},s=function(){e.prototype={$render:e.render,$escape:function(e){return typeof e=="string"?e.replace(/&(?![\w#]+;)|[<>"']/g,function(e){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[e]}):e},$string:function(e){return typeof e=="string"||typeof e=="number"?e:typeof e=="function"?e():""}};var t=Array.prototype.forEach||function(e,t){var n=this.length>>>0;for(var r=0;r<n;r++)r in this&&e.call(t,this[r],r,this)},n=function(e,n){t.call(e,n)},r="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",i=new RegExp(["/\\*(.|\n)*?\\*/|//[^\n]*\n|//[^\n]*$","'[^']*'|\"[^\"]*\"","\\.[s	\n]*[\\$\\w]+","\\b"+r.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),s=function(e){return e=e.replace(i,",").replace(/[^\w\$]+/g,",").replace(/^,|^\d+|,\d+|,$/g,""),e?e.split(","):[]};return function(t,r){function S(t){return l+=t.split(/\n/).length-1,e.isCompress&&(t=t.replace(/[\n\r\t\s]+/g," ")),t=t.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),t=m[1]+"'"+t+"'"+m[2],t+"\n"}function x(t){var n=l;u?t=u(t):r&&(t=t.replace(/\n/g,function(){return l++,"$line="+l+";"}));if(t.indexOf("=")===0){var i=t.indexOf("==")!==0;t=t.replace(/^=*|[\s;]*$/g,"");if(i&&e.isEscape){var s=t.replace(/\s*\([^\)]+\)/,"");!h.hasOwnProperty(s)&&!/^(include|print)$/.test(s)&&(t="$escape($string("+t+"))")}else t="$string("+t+")";t=m[1]+t+m[2]}return r&&(t="$line="+n+";"+t),T(t),t+"\n"}function T(e){e=s(e),n(e,function(e){c.hasOwnProperty(e)||(N(e),c[e]=!0)})}function N(e){var t;e==="print"?t=y:e==="include"?(p.$render=h.$render,t=b):(t="$data."+e,h.hasOwnProperty(e)&&(p[e]=h[e],e.indexOf("$")===0?t="$helpers."+e:t=t+"===undefined?$helpers."+e+":"+t)),d+=e+"="+t+","}var i=e.openTag,o=e.closeTag,u=e.parser,a=t,f="",l=1,c={$data:!0,$helpers:!0,$out:!0,$line:!0},h=e.prototype,p={},d="var $helpers=this,"+(r?"$line=0,":""),v="".trim,m=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],g=v?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",y="function(content){"+g+"}",b="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+g+"}";n(a.split(i),function(e,t){e=e.split(o);var n=e[0],r=e[1];e.length===1?f+=S(n):(f+=x(n),r&&(f+=S(r)))}),a=f,r&&(a="try{"+a+"}catch(e){"+"e.line=$line;"+"throw e"+"}"),a="'use strict';"+d+m[0]+a+"return new String("+m[3]+")";try{var w=new Function("$data",a);return w.prototype=p,w}catch(E){throw E.temp="function anonymous($data) {"+a+"}",E}}}()})(template,this),typeof define=="function"?define(function(e,t,n){n.exports=template}):typeof exports!="undefined"&&(module.exports=template)

/*模板页面开始*/
var templateFileList = template.compile(
		"<ol id='selectable'>" +
			"<%for(var i = 0; i< names.length; i++){%>"+
				"<%if(i==0){%>"+
					"<li class='state-default ui-selected'><%=names[i]%></li>" +
				"<%}else{%>"+
					"<li class='state-default'><%=names[i]%></li>" +
				"<%}%>"+
			"<%}%>" +
		"</ol>"
		);
/*模板页面结束*/

/*腾讯提示框JS*/
window.ZENG=window.ZENG||{};ZENG.dom={getById:function(a){return document.getElementById(a)},get:function(a){return(typeof(a)=="string")?document.getElementById(a):a},createElementIn:function(d,f,e,c){var a=(f=ZENG.dom.get(f)||document.body).ownerDocument.createElement(d||"div"),b;if(typeof(c)=="object"){for(b in c){if(b=="class"){a.className=c[b]}else{if(b=="style"){a.style.cssText=c[b]}else{a[b]=c[b]}}}}e?f.insertBefore(a,f.firstChild):f.appendChild(a);return a},getStyle:function(b,f){b=ZENG.dom.get(b);if(!b||b.nodeType==9){return null}var a=document.defaultView&&document.defaultView.getComputedStyle,c=!a?null:document.defaultView.getComputedStyle(b,""),d="";switch(f){case"float":f=a?"cssFloat":"styleFloat";break;case"opacity":if(!a){var h=100;try{h=b.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(g){try{h=b.filters("alpha").opacity}catch(g){}}return h/100}else{return parseFloat((c||b.style)[f])}break;case"backgroundPositionX":if(a){f="backgroundPosition";return((c||b.style)[f]).split(" ")[0]}break;case"backgroundPositionY":if(a){f="backgroundPosition";return((c||b.style)[f]).split(" ")[1]}break}if(a){return(c||b.style)[f]}else{return(b.currentStyle[f]||b.style[f])}},setStyle:function(c,g,h){if(!(c=ZENG.dom.get(c))||c.nodeType!=1){return false}var e,b=true,d=(e=document.defaultView)&&e.getComputedStyle,f=/z-?index|font-?weight|opacity|zoom|line-?height/i;if(typeof(g)=="string"){e=g;g={};g[e]=h}for(var a in g){h=g[a];if(a=="float"){a=d?"cssFloat":"styleFloat"}else{if(a=="opacity"){if(!d){a="filter";h=h>=1?"":("alpha(opacity="+Math.round(h*100)+")")}}else{if(a=="backgroundPositionX"||a=="backgroundPositionY"){e=a.slice(-1)=="X"?"Y":"X";if(d){var i=ZENG.dom.getStyle(c,"backgroundPosition"+e);a="backgroundPosition";typeof(h)=="number"&&(h=h+"px");h=e=="Y"?(h+" "+(i||"top")):((i||"left")+" "+h)}}}}if(typeof c.style[a]!="undefined"){c.style[a]=h+(typeof h==="number"&&!f.test(a)?"px":"");b=b&&true}else{b=b&&false}}return b},getScrollTop:function(a){var b=a||document;return Math.max(b.documentElement.scrollTop,b.body.scrollTop)},getClientHeight:function(a){var b=a||document;return b.compatMode=="CSS1Compat"?b.documentElement.clientHeight:b.body.clientHeight}};ZENG.string={RegExps:{trim:/^\s+|\s+$/g,ltrim:/^\s+/,rtrim:/\s+$/,nl2br:/\n/g,s2nb:/[\x20]{2}/g,URIencode:/[\x09\x0A\x0D\x20\x21-\x29\x2B\x2C\x2F\x3A-\x3F\x5B-\x5E\x60\x7B-\x7E]/g,escHTML:{re_amp:/&/g,re_lt:/</g,re_gt:/>/g,re_apos:/\x27/g,re_quot:/\x22/g},escString:{bsls:/\\/g,sls:/\//g,nl:/\n/g,rt:/\r/g,tab:/\t/g},restXHTML:{re_amp:/&amp;/g,re_lt:/&lt;/g,re_gt:/&gt;/g,re_apos:/&(?:apos|#0?39);/g,re_quot:/&quot;/g},write:/\{(\d{1,2})(?:\:([xodQqb]))?\}/g,isURL:/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,cut:/[\x00-\xFF]/,getRealLen:{r0:/[^\x00-\xFF]/g,r1:/[\x00-\xFF]/g},format:/\{([\d\w\.]+)\}/g},commonReplace:function(a,c,b){return a.replace(c,b)},format:function(c){var b=Array.prototype.slice.call(arguments),a;c=String(b.shift());if(b.length==1&&typeof(b[0])=="object"){b=b[0]}ZENG.string.RegExps.format.lastIndex=0;return c.replace(ZENG.string.RegExps.format,function(d,e){a=ZENG.object.route(b,e);return a===undefined?d:a})}};ZENG.object={routeRE:/([\d\w_]+)/g,route:function(d,c){d=d||{};c=String(c);var b=ZENG.object.routeRE,a;b.lastIndex=0;while((a=b.exec(c))!==null){d=d[a[0]];if(d===undefined||d===null){break}}return d}};var ua=ZENG.userAgent={},agent=navigator.userAgent;ua.ie=9-((agent.indexOf("Trident/5.0")>-1)?0:1)-(window.XDomainRequest?0:1)-(window.XMLHttpRequest?0:1);if(typeof(ZENG.msgbox)=="undefined"){ZENG.msgbox={}}ZENG.msgbox._timer=null;ZENG.msgbox.loadingAnimationPath=ZENG.msgbox.loadingAnimationPath||("css/icons/loading.gif");ZENG.msgbox.show=function(c,g,h,a){if(typeof(a)=="number"){a={topPosition:a}}a=a||{};var j=ZENG.msgbox,i='<span class="zeng_msgbox_layer" style="display:none;z-index:10000;" id="mode_tips_v2"><span class="gtl_ico_{type}"></span>{loadIcon}{msgHtml}<span class="gtl_end"></span></span>',d='<img src="'+(a.customIcon||j.loadingAnimationPath)+'" alt="" />',e=[0,0,0,0,"succ","fail","clear"],b,f;j._loadCss&&j._loadCss(a.cssPath);b=ZENG.dom.get("q_Msgbox")||ZENG.dom.createElementIn("div",document.body,false,{className:"zeng_msgbox_layer_wrap"});b.id="q_Msgbox";b.style.display="";b.innerHTML=ZENG.string.format(i,{type:e[g]||"hits",msgHtml:c||"",loadIcon:g==6?d:""});j._setPosition(b,h,a.topPosition)};ZENG.msgbox._setPosition=function(a,f,d){f=f||5000;var g=ZENG.msgbox,b=ZENG.dom.getScrollTop(),e=ZENG.dom.getClientHeight(),c=Math.floor(e/2)-40;ZENG.dom.setStyle(a,"top",((document.compatMode=="BackCompat"||ZENG.userAgent.ie<7)?b:0)+((typeof(d)=="number")?d:c)+"px");clearTimeout(g._timer);a.firstChild.style.display="";f&&(g._timer=setTimeout(g.hide,f))};ZENG.msgbox.hide=function(a){var b=ZENG.msgbox;if(a){clearTimeout(b._timer);b._timer=setTimeout(b._hide,a)}else{b._hide()}};ZENG.msgbox._hide=function(){var a=ZENG.dom.get("q_Msgbox"),b=ZENG.msgbox;clearTimeout(b._timer);if(a){var c=a.firstChild;ZENG.dom.setStyle(a,"display","none")}};
/*异步上传组件*/
(function($){window.jUploader=$.jUploader=function(options){options=$.extend({},$.jUploader.defaults,options);options.id=$.jUploader.createId();options.uploading=false;var initButton=function(){options.button=(typeof options.button=='string')?$('#'+options.button):$(options.button);options.button.css({cursor:'pointer',position:'relative',overflow:'hidden',direction:'ltr'}).addClass('jUploader-button').bind('mouseover',function(){$(this).addClass('jUploader-button-hover')}).bind('mouseout',function(){$(this).removeClass('jUploader-button-hover')}).children('span').text(options.messages.upload);if(options.cancelable){options.button.bind('click',cancel)};options.button.append(createInput());return options.button};var createIframe=function(){var id='jUploaderIframe'+options.id;var iframe=$('<iframe id="'+id+'" name="'+id+'" src="javascript:false;" style="display:none"></iframe>').bind('load',complete);return iframe};var createForm=function(){var id='jUploaderForm'+options.id;var form=$('<form id="'+id+'" name="'+id+'" action="'+options.action+'" target="jUploaderIframe'+options.id+'" method="post" enctype="multipart/form-data" style="display:none"></form>');return form};var createInput=function(){var input=$('<input type="file" onchange="this.blur();" />');input.attr("id",'jUploader-file'+options.id).attr("name",'tempFile').css({position:'absolute',right:0,top:0,margin:0,opacity:0,padding:0,fontFamily:'Arial',fontSize:'118px',verticalAlign:'baseline',cursor:'pointer'}).bind('change',function(){options.fileName=getFileName(this);if(validateFile(this)){upload()}});if(window.attachEvent){input.attr('tabIndex',"-1")};return input};var validateFile=function(file){var name=getFileName(file);if(!isAllowedExtension(name)){showMessage('invalidExtension',name);return false}else if(name==''){showMessage('emptyFile',name);return false};return true};var getFileName=function(file){return file.value.replace(/.*(\/|\\)/,"")};var formatFileName=function(name){if(name.length>33){name=name.slice(0,19)+'...'+name.slice(-13)};return name};var isAllowedExtension=function(fileName){var ext=(-1!==fileName.indexOf('.'))?fileName.replace(/.*[.]/,'').toLowerCase():'';if(!options.allowedExtensions.length){return true};for(var i=0;i<options.allowedExtensions.length;i++){if(options.allowedExtensions[i].toLowerCase()==ext){return true}};return false};var showMessage=function(type,fileName){var message=options.messages[type].replace('{file}',formatFileName(fileName)).replace('{extensions}',options.allowedExtensions.join(', '));options.showMessage(message)};var log=function(message){if(options.debug&&window.console)console.log('[jUploader] '+message)};var upload=function(){options.uploading=true;options.onUpload(options.fileName);$(document.body).append(createIframe()).append(createForm());$('#jUploader-file'+options.id).attr('id','jUploader-file-uploading'+options.id).appendTo('#jUploaderForm'+options.id);options.button.append(createInput().hide());if(options.cancelable){options.button.children('span').text(options.messages.cancel)};$('#jUploaderForm'+options.id).get(0).submit()};var cancel=function(){if(options.uploading){options.uploading=false;options.onCancel(options.fileName);options.button.children('span').text(options.messages.upload);$('#jUploaderForm'+options.id).remove();$('#jUploaderIframe'+options.id).attr('src','javascript:false;').remove();$('#jUploader-file'+options.id).show()}};var complete=function(){var iframe=$('#jUploaderIframe'+options.id).get(0);if(!iframe.parentNode){return};if((iframe.contentDocument&&iframe.contentDocument.body&&iframe.contentDocument.body.innerHTML=="false")||(iframe.contentWindow.document&&iframe.contentWindow.document.body&&iframe.contentWindow.document.body.innerHTML=="false")){return};var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document;var response;var innerHtml=doc.body.innerHTML;log("innerHTML = "+innerHtml);if(innerHtml==''){return};options.uploading=false;$('#jUploader-file'+options.id).show();options.button.children('span').text(options.messages.upload);try{var json=innerHtml.replace(/<pre.*>(.*)<\/pre>/g,'$1');response=eval("("+json+")")}catch(e){response={};};setTimeout(function(){$('#jUploaderForm'+options.id).remove();$('#jUploaderIframe'+options.id).remove()},10);options.onComplete(options.fileName,response)};$(window).bind('beforeunload',function(e){if(!options.uploading)return;var e=e||window.event;e.returnValue=options.messages.onLeave;return options.messages.onLeave});return initButton()};$.jUploader.version=1.0;$.jUploader.defaults={button:null,action:'upload.aspx',allowedExtensions:[],cancelable:true,onUpload:function(fileName){},onComplete:function(fileName,response){},onCancel:function(fileName){},messages:{upload:'Upload',cancel:'Cancel',emptyFile:"{file} is empty, please select files again without it.",invalidExtension:"{file} has invalid extension. Only {extensions} are allowed.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(message){alert(message)},debug:false};$.jUploader.setDefaults=function(defaults){$.jUploader.defaults=$.extend({},$.jUploader.defaults,defaults)};$.jUploader.createId=(function(){var id=0;return function(){return++id}})()})(jQuery);

$.jUploader.setDefaults({
    cancelable: true, // 可取消上传
    allowedExtensions: ['vm'], // 只允许上传VM文件
    messages: {
        upload: '上传',
        cancel: '取消',
        emptyFile: "{file} 为空，请选择一个文件.",
        invalidExtension: "{file} 后缀名不合法. 只有 {extensions} 是允许的.",
        onLeave: "文件正在上传，如果你现在离开，上传将会被取消。"
    }
});
/*bootstrap Tab JS*/
/*!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery)*/